@page "/Judge/Home"
@inject Eventify.Data.ApplicationDbContext db
@using Eventify.Components.Account
@using Eventify.Data
@using Microsoft.AspNetCore.Authorization
@inject IdentityUserAccessor UserAccessor
@attribute [Authorize]

<PageTitle>Home-Activities</PageTitle>

<div style="display:flex;flex-direction:column;width:100%;height:100%;justify-content:start;align-items:start;">
    <div class="home-container" style="">
        @foreach (var item in JudgeActivities)
        {
            <ActivityCardView style="margin: 0 1.5rem 1.5rem 0;" Activity="item" />
        }
        @*         @for (int i = 0; i < 5; i++)
        {
        <EventCardView style="margin: 0 1.5rem 1.5rem 0;" />
        } *@

    </div>
</div>

@code{
    // [CascadingParameter]
    // private HttpContext HttpContext { get; set; } = default!;

    [Parameter]
    public ApplicationUser? user { get; set; } = new();

    List<Events>? Events { get; set; } = new();

    [Parameter]
    public List<Activity>? JudgeActivities { get; set; } = new();

    // protected override async Task OnInitializedAsync()
    // {
    //     //user = await UserAccessor.GetRequiredUserAsync(HttpContext);
    //     await GetJudgeActivitiesAsync(user);
    // }
    // async Task GetJudgeActivitiesAsync(ApplicationUser user)
    // {
    //     var judgeActivities = from acts in db.Activity
    //                           join ja in db.JudgeActivity on acts.Id equals ja.ActivityID
    //                           where ja.User.Id == user.Id
    //                           select acts;

    //     JudgeActivities = judgeActivities.ToList();
    // }
}
