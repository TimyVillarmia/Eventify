@page "/{Event_Id}/activities/details"
@rendermode InteractiveServer
@inject Eventify.Data.ApplicationDbContext DB
@using Eventify.Data
@inject NavigationManager NavigationManager
@using Microsoft.EntityFrameworkCore

<PageTitle>Details</PageTitle>


@if (activity is null)
{
    <p><em>Loading...</em></p>
}
else {
    <div class="ActivityDetails-Container">
        <div class="ActivityDetails-Header">
            <img src="activityIcon.png" style="width:48px;height:auto;margin:0 1rem 0 0;"/>
            <h3>@activity.Name</h3>
            <RightMenu DeleteRef="@($"/{Event_Id}/activities/delete?id={activity.Id}")" ModifyRef="@($"/{Event_Id}/activities/edit?id={activity.Id}")" menuBarPosition="position:absolute;bottom: -180%;right: 70%;" menuColor="black" />
        </div>
        <div class="ActivityDetails-Nav">

        </div>
        <div class="ActivityDetails-Content">

        </div>
    </div>
    @* <dl class="row">
        <dt class="col-sm-2">Name</dt>
        <dd class="col-sm-10">@activity.Name</dd>
        <dt class="col-sm-2">Date</dt>
        <dd class="col-sm-10">@activity.Date</dd>
        <dt class="col-sm-2">StartTime</dt>
        <dd class="col-sm-10">@activity.StartTime</dd>
        <dt class="col-sm-2">EndTime</dt>
        <dd class="col-sm-10">@activity.EndTime</dd>
        <dt class="col-sm-2">Venue</dt>
        <dd class="col-sm-10">@activity.Venue</dd>
    </dl>
    <div>
        <a href="@($"/activities/edit?id={activity.Id}")">Edit</a> |
    </div> *@
}


@code {
    Activity? activity;

    [SupplyParameterFromQuery]
    public int Id { get; set; }

    [Parameter]
    public string Event_Id { get; set; }


    protected override async Task OnInitializedAsync()
    {
        activity = await DB.Activity.FirstOrDefaultAsync(m => m.Id == Id);

        if (activity is null)
        {
            NavigationManager.NavigateTo($"/events/details?id={Event_Id}");

        }
    }
}
