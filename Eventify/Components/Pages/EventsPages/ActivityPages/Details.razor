@page "/{Event_Id}/activities/details"
@rendermode InteractiveServer
@inject Eventify.Data.ApplicationDbContext DB
@using Eventify.Data
@inject NavigationManager NavigationManager
@using Microsoft.EntityFrameworkCore

<PageTitle>Details</PageTitle>


@if (activity is null)
{
    <p><em>Loading...</em></p>
}
else {
    <div class="ActivityDetails-Container">
        <div class="ActivityDetails-Header">
            <img src="activityIcon.png" style="width:48px;height:auto;margin:0 1rem 0 0;"/>
            <h3 style="font-size:32px;font-weight:400;">@activity.Name.ToUpper()</h3>
            <RightMenu DeleteRef="@($"/{Event_Id}/activities/delete?id={activity.Id}")" ModifyRef="@($"/{Event_Id}/activities/edit?id={activity.Id}")" menuBarPosition="position:absolute;bottom: -180%;right: 70%;" menuColor="black" />
        </div>
        <div class="ActivityDetails-Nav">
            <button @onclick="@OverviewClick" style="@OverviewBtnStyle">Overview</button>
            <button @onclick="@DetailsClick" style="@DetailsBtnStyle">Details</button>
            <button @onclick="@StakeholdersClick" style="@StakeholdersBtnStyle">Stakeholders</button>
            <button @onclick="@ResultsClick" style="@ResultsBtnStyle">Results</button>
        </div>
        <div class="ActivityDetails-Content">

        </div>
    </div>
    @* <dl class="row">
        <dt class="col-sm-2">Name</dt>
        <dd class="col-sm-10">@activity.Name</dd>
        <dt class="col-sm-2">Date</dt>
        <dd class="col-sm-10">@activity.Date</dd>
        <dt class="col-sm-2">StartTime</dt>
        <dd class="col-sm-10">@activity.StartTime</dd>
        <dt class="col-sm-2">EndTime</dt>
        <dd class="col-sm-10">@activity.EndTime</dd>
        <dt class="col-sm-2">Venue</dt>
        <dd class="col-sm-10">@activity.Venue</dd>
    </dl>
    <div>
        <a href="@($"/activities/edit?id={activity.Id}")">Edit</a> |
    </div> *@
}


@code {
    Activity? activity;

    [SupplyParameterFromQuery]
    public int Id { get; set; }

    [Parameter]
    public string Event_Id { get; set; }

    private string OverviewDisplay { get; set; } = "display:block;";
    private string DetailsDisplay { get; set; } = "display:none;";
    private string StakeholdersDisplay { get; set; } = "display:none;";
    private string ResultsDisplay { get; set; } = "display:none;";

    private string OverviewBtnStyle { get; set; } = "border: solid 1px blue;border-width:0 0 2px 0;color:black;";
    private string DetailsBtnStyle { get; set; } = "border:none;color:#8f8f8f;";
    private string StakeholdersBtnStyle { get; set; } = "border:none;color:#8f8f8f;";
    private string ResultsBtnStyle { get; set; } = "border:none;color:#8f8f8f;";


    protected override async Task OnInitializedAsync()
    {
        activity = await DB.Activity.FirstOrDefaultAsync(m => m.Id == Id);

        if (activity is null)
        {
            NavigationManager.NavigateTo($"/events/details?id={Event_Id}");

        }
    }

    void OverviewClick()
    {
        OverviewBtnStyle = "border: solid 1px blue;border-width:0 0 2px 0;color:black;";
        DetailsBtnStyle = "border:none;color:#8f8f8f;";
        StakeholdersBtnStyle = "border:none;color:#8f8f8f;";
        ResultsBtnStyle = "border:none;color:#8f8f8f;";
    }
    void DetailsClick()
    {
        OverviewBtnStyle = "border:none;color:#8f8f8f;";
        DetailsBtnStyle = "border: solid 1px blue;border-width:0 0 2px 0;color:black;";
        StakeholdersBtnStyle = "border:none;color:#8f8f8f;";
        ResultsBtnStyle = "border:none;color:#8f8f8f;";
    }
    void StakeholdersClick()
    {
        OverviewBtnStyle = "border:none;color:#8f8f8f;";
        DetailsBtnStyle = "border:none;color:#8f8f8f;";
        StakeholdersBtnStyle = "border: solid 1px blue;border-width:0 0 2px 0;color:black;";
        ResultsBtnStyle = "border:none;color:#8f8f8f;";
    }
    void ResultsClick()
    {
        OverviewBtnStyle = "border:none;color:#8f8f8f;";
        DetailsBtnStyle = "border:none;color:#8f8f8f;";
        StakeholdersBtnStyle = "border:none;color:#8f8f8f;";
        ResultsBtnStyle = "border: solid 1px blue;border-width:0 0 2px 0;color:black;";
    }
}
